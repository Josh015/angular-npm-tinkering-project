<mat-sidenav-container
  class="h-full min-h-full w-full min-w-full flex-1"
  [class.dark-theme]="isDarkTheme$ | async"
  [dir]="(textDirection$ | async) || 'ltr'"
  autosize
>
  <mat-sidenav
    #sidenav
    class="mat-elevation-z10 w-[240px]"
    [opened]="!isScreenSmall"
    [mode]="isScreenSmall ? 'over' : 'side'"
  >
    <mat-toolbar color="primary">
      {{ 'ContactManager.Sidenav.Title' | translate }}
    </mat-toolbar>
    @if (usersLoading$ | async) {
      <mat-spinner style="margin: 0 auto" />
    } @else {
      <mat-nav-list>
        @for (user of users$ | async; track user) {
          <mat-list-item (click)="anchor.click()">
            <a
              #anchor
              matListItemTitle
              routerLinkActive="active"
              [routerLink]="['/contact-manager', user.id]"
              class="block"
            >
              {{ user.name }}
            </a>
            <button mat-icon-button matListItemMeta>
              <mat-icon [svgIcon]="user.avatar" />
            </button>
          </mat-list-item>
        }
      </mat-nav-list>
    }
  </mat-sidenav>

  <div class="flex h-full flex-col">
    <app-toolbar
      (toggleTheme)="toggleTheme()"
      (toggleSidenav)="sidenav.toggle()"
      (toggleDir)="toggleDir()"
    />
    <div class="m-[50px]">
      <router-outlet />
    </div>
  </div>
</mat-sidenav-container>
